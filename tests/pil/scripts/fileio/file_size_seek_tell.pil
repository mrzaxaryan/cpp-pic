// Create file with known content
var f = fopen("test_seek.txt", "w");
fwrite(f, "0123456789");
fclose(f);

// Open for reading and test fsize
var f2 = fopen("test_seek.txt", "r");
var size = fsize(f2);
print("File size:", size);
if (size == 10) {
    print("Size correct - PASS");
} else {
    print("ERROR: Expected size 10");
}

// Test ftell at start
var pos = ftell(f2);
if (pos == 0) {
    print("Initial position 0 - PASS");
} else {
    print("ERROR: Expected position 0, got", pos);
}

// Read some bytes and check position
var data = fread(f2, 5);
print("Read:", data);
pos = ftell(f2);
if (pos == 5) {
    print("Position after read - PASS");
} else {
    print("ERROR: Expected position 5, got", pos);
}

// Seek to start
fseek(f2, 0, 0);
pos = ftell(f2);
if (pos == 0) {
    print("Seek to start - PASS");
} else {
    print("ERROR: Seek to start failed");
}

// Seek to end
fseek(f2, 0, 2);
pos = ftell(f2);
if (pos == 10) {
    print("Seek to end - PASS");
} else {
    print("ERROR: Seek to end failed, got", pos);
}

// Seek relative from current - back 3 bytes
fseek(f2, -3, 1);
pos = ftell(f2);
if (pos == 7) {
    print("Relative seek - PASS");
} else {
    print("ERROR: Relative seek failed, got", pos);
}

fclose(f2);
fdelete("test_seek.txt");
