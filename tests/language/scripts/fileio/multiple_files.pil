// Open multiple files simultaneously
var f1 = fopen("multi1.txt", "w");
var f2 = fopen("multi2.txt", "w");
var f3 = fopen("multi3.txt", "w");

if (f1 >= 0 && f2 >= 0 && f3 >= 0) {
    print("Opened 3 files with handles:", f1, f2, f3);

    // Verify different handles
    if (f1 != f2 && f2 != f3 && f1 != f3) {
        print("All handles unique - PASS");
    } else {
        print("ERROR: Handles should be unique");
    }

    // Write different content to each
    fwrite(f1, "File One");
    fwrite(f2, "File Two");
    fwrite(f3, "File Three");

    fclose(f1);
    fclose(f2);
    fclose(f3);

    // Verify content
    var r1 = fopen("multi1.txt", "r");
    var r2 = fopen("multi2.txt", "r");
    var r3 = fopen("multi3.txt", "r");

    var c1 = fread(r1);
    var c2 = fread(r2);
    var c3 = fread(r3);

    print("File 1:", c1);
    print("File 2:", c2);
    print("File 3:", c3);

    if (c1 == "File One" && c2 == "File Two" && c3 == "File Three") {
        print("Multiple files content correct - PASS");
    } else {
        print("ERROR: Content mismatch");
    }

    fclose(r1);
    fclose(r2);
    fclose(r3);
} else {
    print("ERROR: Failed to open multiple files");
}

// Clean up
fdelete("multi1.txt");
fdelete("multi2.txt");
fdelete("multi3.txt");
