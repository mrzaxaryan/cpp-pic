// Create file with multiple lines
var f = fopen("test_lines.txt", "w");
fwrite(f, "Line 1\nLine 2\nLine 3");
fclose(f);

// Read lines one by one
var f2 = fopen("test_lines.txt", "r");
var line1 = freadline(f2);
var line2 = freadline(f2);
var line3 = freadline(f2);
var line4 = freadline(f2);

print("Line 1:", line1);
print("Line 2:", line2);
print("Line 3:", line3);

if (line1 == "Line 1") {
    print("Line 1 correct - PASS");
} else {
    print("ERROR: Line 1 mismatch");
}

if (line2 == "Line 2") {
    print("Line 2 correct - PASS");
} else {
    print("ERROR: Line 2 mismatch");
}

if (line3 == "Line 3") {
    print("Line 3 correct - PASS");
} else {
    print("ERROR: Line 3 mismatch");
}

// Line 4 should be nil - EOF
if (line4 == nil) {
    print("EOF returns nil - PASS");
} else {
    print("ERROR: Expected nil at EOF");
}

fclose(f2);
fdelete("test_lines.txt");
